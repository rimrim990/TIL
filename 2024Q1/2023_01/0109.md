# TIL - 2024.01.09 (화)
## 자바스크립트

### DOM 트리

**window**

자바스크립트가 브라우저에서 사용되면 `window`가 전역 객체가 된다.
- 전역 객체는 어디서나 접근 가능한 객체이다
- `window`는 **브라우저 창**을 표현하는 객체이며 이를 제어할 수 있는 메서드를 제공한다

`window` 하위에는 여러 자식 객체가 존재한다.
```
window
    |- DOM
    |- BOM
```
- `DOM`은 웹 페이지 내의 콘텐츠를 표현한 객체이다 (ex. document - <i>DOM 트리 진입점</i> )
- `BOM`은 문서 외의 것을 제어하기 위한 객체이다 (ex. location, navigator)

**DOM (Document Object Model)**

웹 페이지 내의 모든 컨텐츠는 수정 가능한 객체로 표현된다.
브라우저 상에 올라온 웹 페이지 문서는 **DOM 객체로 표현된다.**

**DOM 트리**

**모든 HTML 태그는 객체**이다. 태그 내에 중첩된 태그, 텍스트 심지어 주석까지도 모두 객체로 표현된다.
- 부모 태그와 자식 태그들은 트리 구조를 형성한리
- 자바스크립트를 사용해 DOM 트리를 조작할 수 있다

```html
<!DOCTYPE HTML>
<html>
<head>
  <title>DOM 트리</title>
</head>
<body>
  <!-- 이것은 주석이다. -->
  DOM 트리에 대해 알아보자.
</body>
</html>
```

예를 들어 위와 같은 HTML 문서는 다음과 같은 DOM 트리를 형성한다.

```
html
    |- head
        |- title
            |- #text DOM 트리
    |- body
        |- #comment 이것은 주석이다.
        |- #text DOM 트리에 대해 알아보자.
```
- 트리의 모든 노드들은 객체이다
- DOM 트리의 루트 노드는 `html`이다
- 텍스트 노드는 자식 노드를 가질 수 없기 때문에 항상 리프노드로 사용된다

**브라우저의 랜더링 과정**

브라우저가 **HTML 파일을 받으면 이를 파싱하여 DOM 트리를 생성**한다.
HTML 태그에 적용된 표준 속성 값들을 DOM 노드의 프로퍼티로 추가한다.
```html
<body id="standard" hello="non-standard">
  <script>
    console.log(document.body.id); // 'standard'
    console.log(document.body.hello); // undefined
  </script>
</body>
```
- 비표준 속성은 프로퍼티로 추가되지 않는다
- DOM 노드의 수가 많을수록 트리 생성이 오래 걸린다

HTML 에서 CSS 스타일을 사용할 경우, CSS 노드로 구성된 트리를 생성한다.  
이후 브라우저는 **DOM 트리와 CSS 오브젝트 트리를 결합하여 렌더 트리를 형성**한다.
- HTML을 객체로 바꾼 것처럼 CSS도 객체로 변환한다
- 일반적으로 CSS 오브젝트 트리를 형성하는 시간은 매우 짧다고 한다

렌더 트리는 **각 노드들의 화면 레이아웃을 계산**한다. 
레이아웃 계산이 끝나면 각 노드들을 **실제 화면의 픽셀로 변환**한다.
- 레이아웃에는 요소들의 위치, 너비와 높이 등이 포함된다
- 애니메이션이 아닐 경우 화면에 픽셀을 그리는 시간은 매우 짧다고 한다



